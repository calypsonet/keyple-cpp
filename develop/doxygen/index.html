<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Calypso SDK C++: &#39;Eclipse Keyple&#39; C++ implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_keyple.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Calypso SDK C++
   </div>
   <div id="projectbrief">Keyple, an Open Source SDK for Ticketing</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">'Eclipse Keyple' C++ implementation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is the repository for the C++ implementation of the 'Eclipse <a href="https://keyple.org/">Keyple</a>' API.</p>
<ul>
<li><a href="#global-architecture-of-keyple">Global Architecture of Keyple</a><ul>
<li><a href="#supported-platforms">Supported platforms</a></li>
<li><a href="#keyple-cpp-repositories-structure">keyple-cpp repositories structure</a></li>
<li><a href="#keyple-features-and-corresponding-packages">Keyple features and corresponding packages</a></li>
<li><a href="#keyple-packages-and-corresponding-usages">Keyple packages and corresponding usages</a></li>
</ul>
</li>
<li><a href="#getting-started">Getting started</a><ul>
<li><a href="#cloning-this-project">Cloning this project</a></li>
</ul>
</li>
<li><a href="#artifacts">Artifacts</a></li>
<li><a href="#">Building the Keyple components</a><ul>
<li><a href="#cpp-components">C++ components</a> <hr/>
 <h2>Global Architecture of Keyple</h2>
</li>
</ul>
</li>
</ul>
<div class="image">
<object type="image/svg+xml" data="docs/img/Keyple-components.svg" alt="global architecture" title="keyple SDK global architecture"></object>
</div>
<p>The API is currently divided in two major layers:</p><ul>
<li>The ‘Keyple Core' : a Secure Element Proxy API which allows managing SE readers in a generic way, whaterver the reader driver or environment, and for standalone or distributed solution (./docs/KeypleCore_UserGuide.md "Keyple Core User Guide").</li>
<li>A ‘Calypso Keyple extension' : a high level Calypso Processing API allowing to operate commands with a Calypso Portable Object, and to manage a secure Calypso transaction (./docs/KeypleCalypso_UserGuide.md "Keyple Calypso User Guide").</li>
</ul>
<p>Dedicated reader’s plugins have to be implemented in order to interface the SE Proxy API with the specific reader’s drivers.</p>
<h3>Supported platforms</h3>
<ul>
<li>Windows / Linux / MacOS</li>
<li>G++ 6 and higher, MSVC++ 14 (other compilers untested)</li>
</ul>
<h3>keyple-java repositories structure</h3>
<ul>
<li>Modules that are provided as artifacts<ul>
<li>keyple-core: source and unit tests for the SE Proxy module (artifact : keyple-java-core)</li>
<li>keyple-calypso: source and unit tests for the Calypso library (artifact : keyple-java-calypso)</li>
<li>keyple-plugin: source and unit tests for the different plugins: PC/SC, Stub, etc.</li>
</ul>
</li>
<li>Developer support, testing<ul>
<li>example: source for Keyple implementation examples, generic or Calypso specific.</li>
</ul>
</li>
</ul>
<h3>Keyple features and corresponding packages</h3>
<p>Keyple features global for any Secure Element solution:</p>
<table class="doxtable">
<tr>
<th>Features </th><th>Packages  </th></tr>
<tr>
<td>Selections of Secure Elements (high level API) </td><td>keyple::core::<b>selection</b> </td></tr>
<tr>
<td>Management of SE readers </td><td>keyple::core::<b>seproxy</b> </td></tr>
<tr>
<td>Notifications of reader plug/unplug, of SE insertion/remove<ul>
<li>
definition of automatic selection request in case of SE insertion on an Observable Reader.</li>
</ul>
</td><td>keyple::core::seproxy::<b>event</b> </td></tr>
<tr>
<td>Communication protocols filters (setting for contactless/contacts SE Reader) </td><td>keyple::core::seproxy::<b>protocol</b> </td></tr>
<tr>
<td>Reader plugins implementation support <ul>
<li>
Utility classes providing generic processing for SE Reader Plugins</li>
</ul>
</td><td>keyple::core::seproxy::<b>plugin</b> </td></tr>
<tr>
<td>Transmition of grouped APDU commands to a SE Reader (low level API) </td><td>keyple::core::seproxy::<b>message</b> </td></tr>
<tr>
<td>SE specific library implementation support <ul>
<li>
generic API to build a SE specific commands library</li>
</ul>
</td><td>keyple::core::<b>command</b> </td></tr>
</table>
<p>Keyple features defined to support the Calypso solution:</p>
<table class="doxtable">
<tr>
<th>Features </th><th>Packages  </th></tr>
<tr>
<td>Calypso Portable Object commands and secure transaction management <ul>
<li>
high level CalypsoAPI, commands’ settings are limited to functional parameters</li>
<li>
Calypso SAM (Secure Module) operations automatically processed</li>
</ul>
</td><td>keyple::calypso::<b>transaction</b> </td></tr>
<tr>
<td>Calypso PO responses data parsing </td><td>keyple::calypso::command::<b>po.parser</b> </td></tr>
<tr>
<td>Calypso SAM responses data parsing </td><td>keyple::calypso::command::<b>sam.parser</b> </td></tr>
<tr>
<td>Calypso PO &amp; SAM commands' sets<ul>
<li>
low level Calypso API, commands’ settings include technical parameters specific to Calypso PO revisions or Calypso SAM revisions</li>
</ul>
</td><td><ul>
<li>
keyple::calypso::<b>command</b></li>
<li>
keyple::calypso::command::<b>po</b></li>
<li>
keyple::calypso::command::<b>po::builder</b></li>
<li>
keyple::calypso::command::<b>po::parser::session</b></li>
<li>
keyple::calypso::command::<b>sam::parser::session</b></li>
<li>
keyple::calypso::command::<b>sam::builder</b></li>
<li>
keyple::calypso::command::<b>sam</b></li>
</ul>
</td></tr>
</table>
<h3>Keyple packages and corresponding usages</h3>
<p>Depending on the targetting usage: implementation of a ticketing <b>application</b> (blue circle), a reader <b>plugin</b> (red circle), or a <b>SE library</b> (green circle), only specific Keyple packages must be imported.</p>
<ul>
<li>generic packages for any SE solution</li>
</ul>
<div class="image">
<object type="image/svg+xml" data="docs/img/KeyplePackages_Core.svg" alt="generic packages" title="Keyple generic packages"></object>
</div>
<ul>
<li>specific packages for Calypso</li>
</ul>
<h2></h2>
<h2>Getting started</h2>
<h3>Cloning this project</h3>
<p>Examples provided in this project relies on symbolic links to handle their common dependencies. (Please refer to this file for more information).</p>
<p>Although symlink support should be provided out of the box for Unix users, <b>Windows users</b> should be aware that the git option <code>core.symlinks</code> needs to be enabled before <a href="https://help.github.com/en/articles/cloning-a-repository">cloning</a> this repo. Several solutions can be considered:</p><ul>
<li>When installing git for Windows, an option <code>Enable symbolic links</code> can be choosen. If it has not been enabled and you want to set it via the installer, a reinstallation is needed</li>
<li>If you do not want to reinstall git, this option can be enabled afterward via the command line <code>git config core.symlinks true</code></li>
<li>Also, the option can be enabled once only for this specific cloning operation with <code>git clone -c core.symlinks=true REPO_URL</code></li>
</ul>
<p>It is important to note that for this option to be actually working, the Windows user needs to have the **_SeCreateSymbolicLink_ permission**: a user with admin rights is typically granted with this permission.</p>
<h2>Building the Keyple components</h2>
<p>This guide helps developer that want to contribute to Keyple components base code. You can fork the project and contribute to it. Every contribution will be reviewed by the developper team and scan by our CI and quality code tools before being merged to the base code.</p>
<h3>C++ components</h3>
<h4>Prerequisites</h4>
<p>Here are the prerequisites to build the keyple components (dynamic libraries)</p><ul>
<li>G++ 6 and higher, MSVC++ 14 (other compilers untested)</li>
<li>libpcsclite1 package installed (Linux) to build the PC/SC plugin</li>
</ul>
<h4>Windows, Linux or Macos</h4>
<p>On Linux and macOS, the following command will build all the artifacts at once </p><div class="fragment"><div class="line">mkdir build; cd build; cmake .. &amp;&amp; make</div></div><!-- fragment --><p>If using Windows or IDEs, CMake support must be installed. Compilation should automatically be handled. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
